(this["webpackJsonpvosk-browser-react-demo"]=this["webpackJsonpvosk-browser-react-demo"]||[]).push([[0],{119:function(e,t,n){},136:function(e,t){},138:function(e,t){},149:function(e,t,n){"use strict";n.r(t);var a,c,o,r,i,s,l,u,d,j,b=n(23),h=(n(114),n(0)),p=n.n(h),m=n(26),f=n.n(m),O=n(24),v=(n(119),n(37)),g=n.n(v),x=n(110),k=n(58),w=n(19),y=n(91),z=n(77),S=n(151),C=n(154),M=n(6),R=Object(O.a)(z.a)(a||(a=Object(b.a)(["\n  box-sizing: border-box;\n  margin-left: 0.5rem;\n"]))),E=function(e){var t=e.recognizer,n=e.ready,a=e.loading,c=Object(h.useRef)(null),o=Object(h.useState)(),r=Object(w.a)(o,2),i=r[0],s=r[1],l=Object(h.useState)(),u=Object(w.a)(l,2),d=u[0],j=u[1];return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(S.a,{onChange:function(e){var n=e.file;if(t&&c.current){var a=URL.createObjectURL(n.originFileObj),o=c.current;o.src=a;var r=null!==d&&void 0!==d?d:new AudioContext,l=r.createScriptProcessor(4096,1,1);l.onaudioprocess=function(e){try{o.currentTime<o.duration&&!o.paused&&t.acceptWaveform(e.inputBuffer)}catch(n){console.error("acceptWaveform failed",n)}};var u=null!==i&&void 0!==i?i:r.createMediaElementSource(o);u.disconnect(),u.connect(l),s(u),j(r)}},customRequest:function(e){e.file;(0,e.onSuccess)("ok")},accept:"audio/*",showUploadList:!1,children:Object(M.jsx)(R,{icon:Object(M.jsx)(C.a,{}),disabled:!n||a,children:"Upload File"})}),Object(M.jsx)("audio",{ref:c,autoPlay:!0})]})},F=n(155),D=n(156),L=n(101),U=n.n(L),A=n(102),B=n(103),I=n(112),V=n(109),W=n(54),P=function(e){Object(I.a)(n,e);var t=Object(V.a)(n);function n(e,a){var c;return Object(A.a)(this,n),(c=t.call(this,a)).recognizer=e,c}return Object(B.a)(n,[{key:"_write",value:function(e,t,n){var a=e.getChannelData(0);this.recognizer&&a.byteLength>0&&this.recognizer.acceptWaveform(e),n()}}]),n}(W.Duplex),J=new W.Writable({write:function(e,t,n){n()},objectMode:!0,decodeStrings:!1}),K=function(e){var t=e.recognizer,n=e.loading,a=e.ready,r=Object(h.useState)(!0),i=Object(w.a)(r,2),s=i[0],l=i[1],u=Object(h.useCallback)(Object(k.a)(g.a.mark((function e(){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=20;break}if(l(!0),c){e.next=17;break}return n=null,e.prev=4,e.next=7,navigator.mediaDevices.getUserMedia({video:!1,audio:{echoCancellation:!0,noiseSuppression:!0}});case 7:n=e.sent,(c=new U.a({objectMode:!0,bufferSize:1024})).setStream(n),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),console.error(e.t0);case 15:e.next=19;break;case 17:c.unpipe(o),c.pipe(J);case 19:o=new P(t,{objectMode:!0});case 20:case"end":return e.stop()}}),e,null,[[4,12]])}))),[t]);Object(h.useEffect)((function(){u()}),[t]),Object(h.useEffect)((function(){l(!0)}),[n]),Object(h.useEffect)((function(){var e,t,n,a;s?(null===(e=c)||void 0===e||e.unpipe(o),null===(t=c)||void 0===t||t.pipe(J)):(null===(n=c)||void 0===n||n.unpipe(J),null===(a=c)||void 0===a||a.pipe(o))}),[s]);return Object(M.jsx)(z.a,{icon:s?Object(M.jsx)(F.a,{}):Object(M.jsx)(D.a,{}),disabled:!a||n,onMouseUp:function(){l((function(e){return!e}))},children:"Speak"})},T=n(152),q=T.a.Option,G=O.a.div(r||(r=Object(b.a)(["\n  display: flex;\n  justify-content: center;\n"]))),N=Object(O.a)(z.a)(i||(i=Object(b.a)(["\n  box-sizing: border-box;\n  margin-left: 0.5rem;\n"]))),Y=[{name:"Catalan",path:"vosk-model-small-ca-0.4.tar.gz"},{name:"Chinese",path:"vosk-model-small-cn-0.3.tar.gz"},{name:"Deutsch",path:"vosk-model-small-de-0.15.tar.gz"},{name:"Indian English",path:"vosk-model-small-en-in-0.4.tar.gz"},{name:"English",path:"vosk-model-small-en-us-0.15.tar.gz"},{name:"Espa\xf1ol",path:"vosk-model-small-es-0.3.tar.gz"},{name:"Farsi",path:"vosk-model-small-fa-0.4.tar.gz"},{name:"French",path:"vosk-model-small-fr-pguyot-0.3.tar.gz"},{name:"Italiano",path:"vosk-model-small-it-0.4.tar.gz"},{name:"Malayalam",path:"vosk-model-malayalam-bigram.tar.gz"},{name:"Portuguese",path:"vosk-model-small-pt-0.3.tar.gz"},{name:"Russian",path:"vosk-model-small-ru-0.4.tar.gz"},{name:"Turkish",path:"vosk-model-small-tr-0.3.tar.gz"},{name:"Vietnamese",path:"vosk-model-small-vn-0.3.tar.gz"}],_=function(e){var t=e.onModelChange,n=e.onModelSelect,a=e.loading,c=Object(h.useState)(Y[4].path),o=Object(w.a)(c,2),r=o[0],i=o[1];return Object(M.jsxs)(G,{children:[Object(M.jsx)(T.a,{style:{height:"2rem",margin:"auto 0",width:"10rem"},defaultValue:Y[4].path,onChange:function(e){t(e),i(e)},children:Y.map((function(e,t){return Object(M.jsx)(q,{value:e.path,children:e.name},t)}))}),Object(M.jsx)(N,{onClick:function(){return n(r)},children:a?"Loading...":"Load"})]})},H=O.a.div(s||(s=Object(b.a)(["\n  width: 80%;\n  text-align: left;\n  max-width: 700px;\n  margin: auto;\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n"]))),Q=O.a.div(l||(l=Object(b.a)(["\n  display: flex;\n  justify-content: center;\n  margin: 1rem auto;\n"]))),X=O.a.div(u||(u=Object(b.a)(["\n  width: 100%;\n  margin: 1rem auto;\n  border: 1px solid #aaaaaa;\n  padding: 1rem;\n  resize: vertical;\n  overflow: auto;\n"]))),Z=O.a.span(d||(d=Object(b.a)(["\n  color: ",";\n  white-space: normal;\n"])),(function(e){var t=e.confidence,n=Math.max(255*(1-t)-20,0);return"rgb(".concat(n,",").concat(n,",").concat(n,")")})),$=function(){var e=Object(h.useState)([]),t=Object(w.a)(e,2),n=t[0],a=t[1],c=Object(h.useState)(""),o=Object(w.a)(c,2),r=o[0],i=o[1],s=Object(h.useState)(),l=Object(w.a)(s,2),u=l[0],d=l[1],j=Object(h.useState)(),b=Object(w.a)(j,2),p=b[0],m=b[1],f=Object(h.useState)(!1),O=Object(w.a)(f,2),v=O[0],z=O[1],S=Object(h.useState)(!1),C=Object(w.a)(S,2),R=C[0],F=C[1],D=function(){var e=Object(k.a)(g.a.mark((function e(t){var n,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z(!0),null===u||void 0===u||u.model.terminate(),e.next=4,Object(y.createModel)("/vosk-browser/models/"+t);case 4:n=e.sent,d({model:n,path:t}),(c=new n.KaldiRecognizer(48e3)).on("result",(function(e){var t=e.result;a((function(e){return[].concat(Object(x.a)(e),[t])}))})),c.on("partialresult",(function(e){i(e.result.partial)})),m((function(){return z(!1),F(!0),c}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(M.jsxs)(H,{children:[Object(M.jsx)(_,{onModelChange:function(e){return F((null===u||void 0===u?void 0:u.path)===e)},onModelSelect:function(e){(null===u||void 0===u?void 0:u.path)!==e&&D(e)},loading:v}),Object(M.jsxs)(Q,{children:[Object(M.jsx)(K,{recognizer:p,loading:v,ready:R}),Object(M.jsx)(E,{recognizer:p,loading:v,ready:R})]}),Object(M.jsxs)(X,{children:[n.map((function(e,t){var n;return null===e||void 0===e||null===(n=e.result)||void 0===n?void 0:n.map((function(e,n){return Object(M.jsxs)(Z,{confidence:e.conf,title:"Confidence: ".concat((100*e.conf).toFixed(2),"%"),children:[e.word," "]},"".concat(t,"-").concat(n))}))})),Object(M.jsx)("span",{children:r},"partial")]})]})},ee=O.a.div(j||(j=Object(b.a)(["\n  text-align: center;\n  margin: auto;\n  justify-content: center;\n"])));f.a.render(Object(M.jsx)(p.a.StrictMode,{children:Object(M.jsxs)(ee,{children:[Object(M.jsx)("h1",{children:"Vosk-Browser Speech Recognition Demo"}),Object(M.jsxs)("p",{children:["Select a language and load the model to start speech recognition. ",Object(M.jsx)("br",{}),"You can either upload a file or speak on the microphone."]}),Object(M.jsx)("p",{children:"Note: Recognition from a file does not work on Chrome for now, use Firefox instead."}),Object(M.jsx)($,{}),Object(M.jsx)("p",{children:Object(M.jsx)("a",{href:"https://github.com/ccoreilly/vosk-browser",children:"Vosk-Browser Github Repository"})}),Object(M.jsxs)("p",{children:["Malayalam model is Copyright 2021"," ",Object(M.jsx)("a",{href:"https://gitlab.com/kavyamanohar/vosk-malayalam/",children:"Kavya Manohar"}),". All other models are Copyright 2019"," ",Object(M.jsx)("a",{href:"https://alphacephei.com/en/",children:"Alpha Cephei"})," Inc. All Rights Reserved. ",Object(M.jsx)("a",{href:"https://alphacephei.com/vosk/models",children:"Distributed"})," ","under Apache 2.0 license."]})]})}),document.getElementById("root"))}},[[149,1,2]]]);
//# sourceMappingURL=main.abb0eedf.chunk.js.map