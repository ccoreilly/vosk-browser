{"version":3,"sources":["microphone.tsx","file-upload.tsx","audiostreamer.ts","audiobucket.ts","model-loader.tsx","recognizer.tsx","index.tsx"],"names":["micStream","audioStreamer","StyledButton","styled","Button","FileUpload","recognizer","ready","loading","audioRef","useRef","useState","audioSource","setAudioSource","audioContext","setAudioContext","onChange","file","current","fileUrl","URL","createObjectURL","originFileObj","audioPlayer","src","_audioContext","AudioContext","recognizerNode","createScriptProcessor","onaudioprocess","event","currentTime","duration","paused","acceptWaveform","inputBuffer","error","console","_audioSource","createMediaElementSource","disconnect","connect","customRequest","onSuccess","accept","showUploadList","icon","UploadOutlined","disabled","ref","autoPlay","AudioStreamer","options","chunk","encoding","callback","buffer","getChannelData","this","byteLength","Duplex","audioBucket","Writable","write","objectMode","decodeStrings","Microphone","muted","setMuted","startRecognitionStream","useCallback","a","mediaStream","navigator","mediaDevices","getUserMedia","video","audio","echoCancellation","noiseSuppression","MicrophoneStream","bufferSize","setStream","unpipe","pipe","useEffect","AudioMutedOutlined","AudioOutlined","onMouseUp","Option","Select","Wrapper","div","models","name","path","ModelLoader","onModelChange","onModelSelect","model","setModel","style","height","margin","width","defaultValue","value","map","index","onClick","Header","ResultContainer","Word","span","confidence","color","Math","max","Recognizer","utterances","setUtterances","partial","setPartial","loadedModel","setLoadedModel","setRecognizer","setLoading","setReady","loadModel","terminate","createModel","process","KaldiRecognizer","on","message","result","utt","uindex","word","windex","conf","title","toFixed","ReactDOM","render","StrictMode","href","document","getElementById"],"mappings":"qNAeIA,EACAC,E,oKCVEC,EAAeC,YAAOC,IAAPD,CAAH,+EA+EHE,EApEoC,SAAC,GAI7C,IAHLC,EAGI,EAHJA,WACAC,EAEI,EAFJA,MACAC,EACI,EADJA,QAEMC,EAAWC,iBAAyB,MADtC,EAEkCC,qBAFlC,mBAEGC,EAFH,KAEgBC,EAFhB,OAGoCF,qBAHpC,mBAGGG,EAHH,KAGiBC,EAHjB,KA+CJ,OACE,qCACE,cAAC,IAAD,CACEC,SA7CW,SAAC,GAAmB,IAAjBC,EAAgB,EAAhBA,KAClB,GAAIX,GAAcG,EAASS,QAAS,CAClC,IAAMC,EAAUC,IAAIC,gBAAgBJ,EAAKK,eACnCC,EAAcd,EAASS,QAC7BK,EAAYC,IAAML,EAElB,IAAMM,EAAa,OAAGX,QAAH,IAAGA,IAAgB,IAAIY,aAEpCC,EAAiBF,EAAcG,sBAAsB,KAAM,EAAG,GACpED,EAAeE,eAAiB,SAACC,GAC/B,IAEIP,EAAYQ,YAAcR,EAAYS,WACrCT,EAAYU,QAEb3B,EAAW4B,eAAeJ,EAAMK,aAElC,MAAOC,GACPC,QAAQD,MAAM,wBAAyBA,KAI3C,IAAME,EAAY,OAChB1B,QADgB,IAChBA,IAAea,EAAcc,yBAAyBhB,GAExDe,EAAaE,aACbF,EAAaG,QAAQd,GAOrBd,EAAeyB,GACfvB,EAAgBU,KAYdiB,cARe,SAAC,GAA6B,EAA3BzB,MACtB0B,EADiD,EAArBA,WAClB,OAQNC,OAAO,UACPC,gBAAgB,EAJlB,SAME,cAAC3C,EAAD,CAAc4C,KAAM,cAACC,EAAA,EAAD,IAAoBC,UAAWzC,GAASC,EAA5D,2BAIF,uBAAOyC,IAAKxC,EAAUyC,UAAQ,Q,gFC7EvBC,EAAb,kDACE,WAAmB7C,EAA6B8C,GAA0B,IAAD,8BACvE,cAAMA,IADW9C,aAAsD,EAD3E,0CAKE,SAAc+C,EAAoBC,EAAeC,GAC/C,IAAMC,EAASH,EAAMI,eAAe,GAChCC,KAAKpD,YAAckD,EAAOG,WAAa,GACzCD,KAAKpD,WAAW4B,eAAemB,GAEjCE,QAVJ,GAAmCK,UCDtBC,EAAc,IAAIC,WAAS,CACtCC,MAAO,SAAUV,EAAOC,EAAUC,GAChCA,KAEFS,YAAY,EACZC,eAAe,IHsFFC,EA3EoC,SAAC,GAI7C,IAHL5D,EAGI,EAHJA,WACAE,EAEI,EAFJA,QACAD,EACI,EADJA,MACI,EACsBI,oBAAS,GAD/B,mBACGwD,EADH,KACUC,EADV,KAGEC,EAAyBC,sBAAW,sBAAC,4BAAAC,EAAA,0DACrCjE,EADqC,oBAEvC8D,GAAS,GAEJpE,EAJkC,wBAKjCwE,EAAc,KALmB,kBAOfC,UAAUC,aAAaC,aAAa,CACtDC,OAAO,EACPC,MAAO,CACLC,kBAAkB,EAClBC,kBAAkB,KAXa,OAOnCP,EAPmC,QAenCxE,EAAY,IAAIgF,IAAiB,CAC/BhB,YAAY,EACZiB,WAAY,QAGJC,UAAUV,GApBe,kDAsBnCnC,QAAQD,MAAR,MAtBmC,gCAyBrCpC,EAAUmF,OAAOlF,GACjBD,EAAUoF,KAAKvB,GA1BsB,QA6BvC5D,EAAgB,IAAIkD,EAAc7C,EAAY,CAC5C0D,YAAY,IA9ByB,0DAiCxC,CAAC1D,IAEJ+E,qBAAU,WACRhB,MACC,CAAC/D,IAEJ+E,qBAAU,WACRjB,GAAS,KACR,CAAC5D,IAEJ6E,qBAAU,WAIA,IAAD,IAHK,IAAPlB,GAIM,QAAT,EAAAnE,SAAA,SAAWmF,OAAOlF,GACT,QAAT,EAAAD,SAAA,SAAWoF,KAAKvB,KAJP,QAAT,EAAA7D,SAAA,SAAWmF,OAAOtB,GACT,QAAT,EAAA7D,SAAA,SAAWoF,KAAKnF,MAKjB,CAACkE,IAMJ,OACE,cAAC,IAAD,CACErB,KAAMqB,EAAQ,cAACmB,EAAA,EAAD,IAAyB,cAACC,EAAA,EAAD,IACvCvC,UAAWzC,GAASC,EACpBgF,UARc,WAChBpB,GAAS,SAACD,GAAD,OAAYA,MAIrB,oB,SI/EIsB,EAAWC,IAAXD,OAEFE,EAAUxF,IAAOyF,IAAV,0EAKP1F,EAAeC,YAAOC,IAAPD,CAAH,+EAUL0F,EAAgD,CAC3D,CACEC,KAAM,UACNC,KAAM,kCAER,CACED,KAAM,UACNC,KAAM,kCAER,CACED,KAAM,UACNC,KAAM,mCAER,CACED,KAAM,iBACNC,KAAM,qCAER,CACED,KAAM,UACNC,KAAM,sCAER,CACED,KAAM,aACNC,KAAM,kCAER,CACED,KAAM,QACNC,KAAM,kCAER,CACED,KAAM,SACNC,KAAM,yCAER,CACED,KAAM,WACNC,KAAM,kCAER,CACED,KAAM,YACNC,KAAM,sCAER,CACED,KAAM,aACNC,KAAM,kCAER,CACED,KAAM,UACNC,KAAM,kCAER,CACED,KAAM,UACNC,KAAM,kCAER,CACED,KAAM,aACNC,KAAM,mCAsCKC,EAlCqC,SAAC,GAI9C,IAHLC,EAGI,EAHJA,cACAC,EAEI,EAFJA,cACA1F,EACI,EADJA,QACI,EACsBG,mBAASkF,EAAO,GAAGE,MADzC,mBACGI,EADH,KACUC,EADV,KAGJ,OACE,eAACT,EAAD,WACE,cAAC,IAAD,CACEU,MAAO,CACLC,OAAQ,OACRC,OAAQ,SACRC,MAAO,SAETC,aAAcZ,EAAO,GAAGE,KACxB/E,SAAU,SAAC0F,GACTT,EAAcS,GACdN,EAASM,IATb,SAYGb,EAAOc,KAAI,SAACR,EAAOS,GAAR,OACV,cAACnB,EAAD,CAAQiB,MAAOP,EAAMJ,KAArB,SACGI,EAAML,MADuBc,QAKpC,cAAC,EAAD,CAAcC,QAAS,kBAAMX,EAAcC,IAA3C,SACG3F,EAAU,aAAe,aCpG5BmF,EAAUxF,IAAOyF,IAAV,+KAUPkB,EAAS3G,IAAOyF,IAAV,gGAMNmB,EAAkB5G,IAAOyF,IAAV,0JASfoB,EAAO7G,IAAO8G,KAAV,mEACC,YAAqB,IAAlBC,EAAiB,EAAjBA,WACJC,EAAQC,KAAKC,IAAI,KAAO,EAAIH,GAAc,GAAI,GACpD,MAAM,OAAN,OAAcC,EAAd,YAAuBA,EAAvB,YAAgCA,EAAhC,QAeSG,EAAsC,WAAO,IAAD,EACnB3G,mBAAuB,IADJ,mBAChD4G,EADgD,KACpCC,EADoC,OAEzB7G,mBAAS,IAFgB,mBAEhD8G,EAFgD,KAEvCC,EAFuC,OAGjB/G,qBAHiB,mBAGhDgH,EAHgD,KAGnCC,EAHmC,OAOnBjH,qBAPmB,mBAOhDL,EAPgD,KAOpCuH,EAPoC,OAQzBlH,oBAAS,GARgB,mBAQhDH,EARgD,KAQvCsH,EARuC,OAS7BnH,oBAAS,GAToB,mBAShDJ,EATgD,KASzCwH,EATyC,KAWjDC,EAAS,uCAAG,WAAOjC,GAAP,iBAAAxB,EAAA,6DAChBuD,GAAW,GACA,OAAXH,QAAW,IAAXA,KAAaxB,MAAM8B,YAFH,SAIIC,sBAAYC,wBAAsCpC,GAJtD,OAIVI,EAJU,OAMhByB,EAAe,CAAEzB,QAAOJ,UAClBzF,EAAa,IAAI6F,EAAMiC,gBAAgB,OAClCC,GAAG,UAAU,SAACC,GACvB,IAAMC,EAAqBD,EAAQC,OACnCf,GAAc,SAACgB,GAAD,4BAA2BA,GAA3B,CAAgCD,UAGhDjI,EAAW+H,GAAG,iBAAiB,SAACC,GAC9BZ,EAAWY,EAAQC,OAAOd,YAG5BI,GAAc,WAGZ,OAFAC,GAAW,GACXC,GAAS,GACFzH,KApBO,4CAAH,sDAwBf,OACE,eAAC,EAAD,WACE,cAAC,EAAD,CACE2F,cAAe,SAACF,GAAD,OAAUgC,GAAoB,OAAXJ,QAAW,IAAXA,OAAA,EAAAA,EAAa5B,QAASA,IACxDG,cAAe,SAACH,IACC,OAAX4B,QAAW,IAAXA,OAAA,EAAAA,EAAa5B,QAASA,GACxBiC,EAAUjC,IAGdvF,QAASA,IAEX,eAACsG,EAAD,WACE,cAAC,EAAD,CAAYxG,WAAYA,EAAYE,QAASA,EAASD,MAAOA,IAC7D,cAAC,EAAD,CAAYD,WAAYA,EAAYE,QAASA,EAASD,MAAOA,OAE/D,eAACwG,EAAD,WACGQ,EAAWZ,KAAI,SAAC6B,EAAKC,GAAN,oBACdD,QADc,IACdA,GADc,UACdA,EAAKD,cADS,aACd,EAAa5B,KAAI,SAAC+B,EAAMC,GAAP,OACf,eAAC3B,EAAD,CAEEE,WAAYwB,EAAKE,KACjBC,MAAK,uBAA8B,IAAZH,EAAKE,MAAYE,QAAQ,GAA3C,KAHP,UAKGJ,EAAKA,KAAM,MALd,UACUD,EADV,YACoBE,UAQxB,+BAAqBlB,GAAX,kBCvGZ9B,GAAUxF,IAAOyF,IAAV,gGAMbmD,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,eAAC,GAAD,WACE,sEACA,mGACoE,uBADpE,8DAIA,oHAIA,cAAC,EAAD,IACA,4BACE,mBAAGC,KAAK,4CAAR,8CAIF,kEACoC,IAClC,mBAAGA,KAAK,kDAAR,2BAFF,wCAKwC,IACtC,mBAAGA,KAAK,8BAAR,0BANF,8BAOY,mBAAGA,KAAK,sCAAR,yBAA8D,IAP1E,oCAYJC,SAASC,eAAe,W","file":"static/js/main.abb0eedf.chunk.js","sourcesContent":["import { Button } from \"antd\";\nimport { AudioMutedOutlined, AudioOutlined } from \"@ant-design/icons\";\nimport MicrophoneStream from \"microphone-stream\";\nimport React, { useCallback, useEffect, useState } from \"react\";\n\nimport { AudioStreamer } from \"./audiostreamer\";\nimport { audioBucket } from \"./audiobucket\";\nimport { KaldiRecognizer } from \"vosk-browser\";\n\ninterface Props {\n  recognizer: KaldiRecognizer | undefined;\n  ready: boolean;\n  loading: boolean;\n}\n\nlet micStream: any;\nlet audioStreamer: AudioStreamer;\n\nconst Microphone: React.FunctionComponent<Props> = ({\n  recognizer,\n  loading,\n  ready,\n}) => {\n  const [muted, setMuted] = useState(true);\n\n  const startRecognitionStream = useCallback(async () => {\n    if (recognizer) {\n      setMuted(true);\n\n      if (!micStream) {\n        let mediaStream = null;\n        try {\n          mediaStream = await navigator.mediaDevices.getUserMedia({\n            video: false,\n            audio: {\n              echoCancellation: true,\n              noiseSuppression: true,\n            },\n          });\n\n          micStream = new MicrophoneStream({\n            objectMode: true,\n            bufferSize: 1024,\n          });\n\n          micStream.setStream(mediaStream);\n        } catch (err) {\n          console.error(err);\n        }\n      } else {\n        micStream.unpipe(audioStreamer);\n        micStream.pipe(audioBucket);\n      }\n\n      audioStreamer = new AudioStreamer(recognizer, {\n        objectMode: true,\n      });\n    }\n  }, [recognizer]);\n\n  useEffect(() => {\n    startRecognitionStream();\n  }, [recognizer]);\n\n  useEffect(() => {\n    setMuted(true);\n  }, [loading]);\n\n  useEffect(() => {\n    if (!muted) {\n      micStream?.unpipe(audioBucket);\n      micStream?.pipe(audioStreamer);\n    } else {\n      micStream?.unpipe(audioStreamer);\n      micStream?.pipe(audioBucket);\n    }\n  }, [muted]);\n\n  const toggleMic = () => {\n    setMuted((muted) => !muted);\n  };\n\n  return (\n    <Button\n      icon={muted ? <AudioMutedOutlined /> : <AudioOutlined />}\n      disabled={!ready || loading}\n      onMouseUp={toggleMic}\n    >\n      Speak\n    </Button>\n  );\n};\n\nexport default Microphone;\n","import React, { createRef, useRef, useState } from \"react\";\nimport { Button, Upload } from \"antd\";\nimport { UploadOutlined } from \"@ant-design/icons\";\nimport styled from \"styled-components\";\nimport { KaldiRecognizer } from \"vosk-browser\";\n\nconst StyledButton = styled(Button)`\n  box-sizing: border-box;\n  margin-left: 0.5rem;\n`;\n\ninterface Props {\n  recognizer: KaldiRecognizer | undefined;\n  ready: boolean;\n  loading: boolean;\n}\n\nconst FileUpload: React.FunctionComponent<Props> = ({\n  recognizer,\n  ready,\n  loading,\n}) => {\n  const audioRef = useRef<HTMLAudioElement>(null);\n  const [audioSource, setAudioSource] = useState<MediaElementAudioSourceNode>();\n  const [audioContext, setAudioContext] = useState<AudioContext>();\n\n  const onChange = ({ file }: any) => {\n    if (recognizer && audioRef.current) {\n      const fileUrl = URL.createObjectURL(file.originFileObj);\n      const audioPlayer = audioRef.current;\n      audioPlayer.src = fileUrl;\n\n      const _audioContext = audioContext ?? new AudioContext();\n\n      const recognizerNode = _audioContext.createScriptProcessor(4096, 1, 1);\n      recognizerNode.onaudioprocess = (event) => {\n        try {\n          if (\n            audioPlayer.currentTime < audioPlayer.duration &&\n            !audioPlayer.paused\n          ) {\n            recognizer.acceptWaveform(event.inputBuffer);\n          }\n        } catch (error) {\n          console.error(\"acceptWaveform failed\", error);\n        }\n      };\n\n      const _audioSource =\n        audioSource ?? _audioContext.createMediaElementSource(audioPlayer);\n\n      _audioSource.disconnect();\n      _audioSource.connect(recognizerNode);\n      // TODO: investigate why recognition quality worsens when recognizerNode is connected\n      // to destination\n      //\n      // Uncomment the next line for it to work in Chrome.\n      // recognizerNode.connect(_audioContext.destination);\n\n      setAudioSource(_audioSource);\n      setAudioContext(_audioContext);\n    }\n  };\n\n  const dummyRequest = ({ file, onSuccess }: any) => {\n    onSuccess(\"ok\");\n  };\n\n  return (\n    <>\n      <Upload\n        onChange={onChange}\n        customRequest={dummyRequest}\n        accept=\"audio/*\"\n        showUploadList={false}\n      >\n        <StyledButton icon={<UploadOutlined />} disabled={!ready || loading}>\n          Upload File\n        </StyledButton>\n      </Upload>\n      <audio ref={audioRef} autoPlay></audio>\n    </>\n  );\n};\n\nexport default FileUpload;\n","import { Duplex, DuplexOptions } from \"readable-stream\";\nimport { KaldiRecognizer } from \"vosk-browser\";\n\nexport class AudioStreamer extends Duplex {\n  constructor(public recognizer: KaldiRecognizer, options?: DuplexOptions) {\n    super(options);\n  }\n\n  public _write(chunk: AudioBuffer, encoding: any, callback: any) {\n    const buffer = chunk.getChannelData(0);\n    if (this.recognizer && buffer.byteLength > 0) {\n      this.recognizer.acceptWaveform(chunk);\n    }\n    callback();\n  }\n}\n","import { Writable } from \"readable-stream\";\n\nexport const audioBucket = new Writable({\n  write: function (chunk, encoding, callback) {\n    callback();\n  },\n  objectMode: true,\n  decodeStrings: false,\n});\n","import { Button, Select } from \"antd\";\nimport React, { useState } from \"react\";\nimport styled from \"styled-components\";\n\nconst { Option } = Select;\n\nconst Wrapper = styled.div`\n  display: flex;\n  justify-content: center;\n`;\n\nconst StyledButton = styled(Button)`\n  box-sizing: border-box;\n  margin-left: 0.5rem;\n`;\ninterface Props {\n  onModelChange: (value: string) => void;\n  onModelSelect: (value: string) => void;\n  loading: boolean;\n}\n\nexport const models: Array<{ name: string; path: string }> = [\n  {\n    name: \"Catalan\",\n    path: \"vosk-model-small-ca-0.4.tar.gz\",\n  },\n  {\n    name: \"Chinese\",\n    path: \"vosk-model-small-cn-0.3.tar.gz\",\n  },\n  {\n    name: \"Deutsch\",\n    path: \"vosk-model-small-de-0.15.tar.gz\",\n  },\n  {\n    name: \"Indian English\",\n    path: \"vosk-model-small-en-in-0.4.tar.gz\",\n  },\n  {\n    name: \"English\",\n    path: \"vosk-model-small-en-us-0.15.tar.gz\",\n  },\n  {\n    name: \"Español\",\n    path: \"vosk-model-small-es-0.3.tar.gz\",\n  },\n  {\n    name: \"Farsi\",\n    path: \"vosk-model-small-fa-0.4.tar.gz\",\n  },\n  {\n    name: \"French\",\n    path: \"vosk-model-small-fr-pguyot-0.3.tar.gz\",\n  },\n  {\n    name: \"Italiano\",\n    path: \"vosk-model-small-it-0.4.tar.gz\",\n  },\n  {\n    name: \"Malayalam\",\n    path: \"vosk-model-malayalam-bigram.tar.gz\",\n  },\n  {\n    name: \"Portuguese\",\n    path: \"vosk-model-small-pt-0.3.tar.gz\",\n  },\n  {\n    name: \"Russian\",\n    path: \"vosk-model-small-ru-0.4.tar.gz\",\n  },\n  {\n    name: \"Turkish\",\n    path: \"vosk-model-small-tr-0.3.tar.gz\",\n  },\n  {\n    name: \"Vietnamese\",\n    path: \"vosk-model-small-vn-0.3.tar.gz\",\n  },\n];\n\nconst ModelLoader: React.FunctionComponent<Props> = ({\n  onModelChange,\n  onModelSelect,\n  loading,\n}) => {\n  const [model, setModel] = useState(models[4].path);\n\n  return (\n    <Wrapper>\n      <Select\n        style={{\n          height: \"2rem\",\n          margin: \"auto 0\",\n          width: \"10rem\",\n        }}\n        defaultValue={models[4].path}\n        onChange={(value: string) => {\n          onModelChange(value);\n          setModel(value);\n        }}\n      >\n        {models.map((model, index) => (\n          <Option value={model.path} key={index}>\n            {model.name}\n          </Option>\n        ))}\n      </Select>\n      <StyledButton onClick={() => onModelSelect(model)}>\n        {loading ? \"Loading...\" : \"Load\"}\n      </StyledButton>\n    </Wrapper>\n  );\n};\n\nexport default ModelLoader;\n","import React, { useState } from \"react\";\nimport styled from \"styled-components\";\n\nimport { createModel, KaldiRecognizer, Model } from \"vosk-browser\";\nimport FileUpload from \"./file-upload\";\nimport Microphone from \"./microphone\";\nimport ModelLoader from \"./model-loader\";\n\nconst Wrapper = styled.div`\n  width: 80%;\n  text-align: left;\n  max-width: 700px;\n  margin: auto;\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n`;\n\nconst Header = styled.div`\n  display: flex;\n  justify-content: center;\n  margin: 1rem auto;\n`;\n\nconst ResultContainer = styled.div`\n  width: 100%;\n  margin: 1rem auto;\n  border: 1px solid #aaaaaa;\n  padding: 1rem;\n  resize: vertical;\n  overflow: auto;\n`;\n\nconst Word = styled.span<{ confidence: number }>`\n  color: ${({ confidence }) => {\n    const color = Math.max(255 * (1 - confidence) - 20, 0);\n    return `rgb(${color},${color},${color})`;\n  }};\n  white-space: normal;\n`;\n\ninterface VoskResult {\n  result: Array<{\n    conf: number;\n    start: number;\n    end: number;\n    word: string;\n  }>;\n  text: string;\n}\n\nexport const Recognizer: React.FunctionComponent = () => {\n  const [utterances, setUtterances] = useState<VoskResult[]>([]);\n  const [partial, setPartial] = useState(\"\");\n  const [loadedModel, setLoadedModel] = useState<{\n    model: Model;\n    path: string;\n  }>();\n  const [recognizer, setRecognizer] = useState<KaldiRecognizer>();\n  const [loading, setLoading] = useState(false);\n  const [ready, setReady] = useState(false);\n\n  const loadModel = async (path: string) => {\n    setLoading(true);\n    loadedModel?.model.terminate();\n\n    const model = await createModel(process.env.PUBLIC_URL + \"/models/\" + path);\n\n    setLoadedModel({ model, path });\n    const recognizer = new model.KaldiRecognizer(48000);\n    recognizer.on(\"result\", (message: any) => {\n      const result: VoskResult = message.result;\n      setUtterances((utt: VoskResult[]) => [...utt, result]);\n    });\n\n    recognizer.on(\"partialresult\", (message: any) => {\n      setPartial(message.result.partial);\n    });\n\n    setRecognizer(() => {\n      setLoading(false);\n      setReady(true);\n      return recognizer;\n    });\n  };\n\n  return (\n    <Wrapper>\n      <ModelLoader\n        onModelChange={(path) => setReady(loadedModel?.path === path)}\n        onModelSelect={(path) => {\n          if (loadedModel?.path !== path) {\n            loadModel(path);\n          }\n        }}\n        loading={loading}\n      />\n      <Header>\n        <Microphone recognizer={recognizer} loading={loading} ready={ready} />\n        <FileUpload recognizer={recognizer} loading={loading} ready={ready} />\n      </Header>\n      <ResultContainer>\n        {utterances.map((utt, uindex) =>\n          utt?.result?.map((word, windex) => (\n            <Word\n              key={`${uindex}-${windex}`}\n              confidence={word.conf}\n              title={`Confidence: ${(word.conf * 100).toFixed(2)}%`}\n            >\n              {word.word}{\" \"}\n            </Word>\n          ))\n        )}\n        <span key=\"partial\">{partial}</span>\n      </ResultContainer>\n    </Wrapper>\n  );\n};\n","import \"antd/dist/antd.min.css\";\n\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport styled from \"styled-components\";\n\nimport \"./index.css\";\n\nimport { Recognizer } from \"./recognizer\";\n\nconst Wrapper = styled.div`\n  text-align: center;\n  margin: auto;\n  justify-content: center;\n`;\n\nReactDOM.render(\n  <React.StrictMode>\n    <Wrapper>\n      <h1>Vosk-Browser Speech Recognition Demo</h1>\n      <p>\n        Select a language and load the model to start speech recognition. <br />\n        You can either upload a file or speak on the microphone.\n      </p>\n      <p>\n        Note: Recognition from a file does not work on Chrome for now, use\n        Firefox instead.\n      </p>\n      <Recognizer />\n      <p>\n        <a href=\"https://github.com/ccoreilly/vosk-browser\">\n          Vosk-Browser Github Repository\n        </a>\n      </p>\n      <p>\n        Malayalam model is Copyright 2021{\" \"}\n        <a href=\"https://gitlab.com/kavyamanohar/vosk-malayalam/\">\n          Kavya Manohar\n        </a>\n        . All other models are Copyright 2019{\" \"}\n        <a href=\"https://alphacephei.com/en/\">Alpha Cephei</a> Inc. All Rights\n        Reserved. <a href=\"https://alphacephei.com/vosk/models\">Distributed</a>{\" \"}\n        under Apache 2.0 license.\n      </p>\n    </Wrapper>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}